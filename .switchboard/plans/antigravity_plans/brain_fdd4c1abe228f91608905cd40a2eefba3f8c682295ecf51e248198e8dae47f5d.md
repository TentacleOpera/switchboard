# Unblock Analyst Buttons Without Active Plan

This plan decouples the "analyst buttons" (Send Question, Generate Context Map) in the sidebar from the requirement of having an active plan selected. The analyst role operates independently of specific plans, and these actions already function without session IDs in the backend.

## Proposed Changes

### [Webview]

#### [MODIFY] [implementation.html](file:///c:/Users/patvu/Documents/GitHub/switchboard/src/webview/implementation.html)

Remove the `!isPlanSelected()` check from the disabled state logic specifically for the analyst buttons. 
*Clarification: Ensure this logic targets only the specific analyst buttons (e.g., `#btn-analyst-send`, `#btn-context-map`) and does not inadvertently enable buttons for roles that require a plan (Coder, Reviewer).*

```diff
- btn.disabled = !isReady || pendingDispatch || !isPlanSelected();
+ btn.disabled = !isReady || pendingDispatch;
```

## Verification Plan

### Manual Verification

1.  Open the Switchboard sidebar.
2.  Ensure no plan is selected in the "Active Plan" dropdown (should show "Select a plan...").
3.  Assign an agent to the "analyst" role.
4.  Verify that the "SEND QUESTION" button and the "GENERATE CONTEXT MAP" button are **enabled**.
5.  Type a message and click "SEND QUESTION". Verify it is dispatched to the analyst terminal. *Check Extension Host logs to confirm no null reference errors occur due to missing plan ID.*
6.  Enter a feature description and click the context map icon. Verify it triggers the context map generation. *Check Extension Host logs to confirm no null reference errors occur due to missing plan ID.*
7.  Select a plan and verify the buttons remain enabled.

## Review Feedback
- **[x] Stage 1 (Grumpy) Critique Applied:** Addressed ambiguity in DOM element targeting. The diff was too generic (`btn.disabled = ...`) and risked breaking other roles.
- **[x] Stage 2 (Balanced) Synthesis Applied:** Added explicit instructions to target specific Analyst button IDs/classes and included backend log verification steps to ensure missing `planId` doesn't cause silent errors during dispatch.
